SETS
V        vessels                                 /v1*v60/
B        berths                                  /b1*b30/
T        times                                   /t1*t50/
CB(B)    corner berths                           /b8,b22/
CB2(B)   not assigned corner berths              /b9,b23/;
Alias(T,TO,TT1,TT2);
Alias(B,B1,B2);

PARAMETERS
P(V)     priority value of vessel v              /v1 5, v2 10, v3 6, v4 10, v5 8, v6 5, v7 3, v8 5, v9 5, v10 2, v11 8, v12 9, v13 8, v14 7, v15 3, v16 5, v17 10, v18 7, v19 8, v20 3, v21 7, v22 6, v23 2, v24 5, v25 2, v26 6, v27 2, v28 6, v29 7, v30 8, v31 5, v32 3, v33 5, v34 2, v35 7, v36 4, v37 8, v38 5, v39 6, v40 8, v41 3, v42 9, v43 5, v44 10, v45 6, v46 3, v47 7, v48 9, v49 6, v50 6, v51 8, v52 10, v53 10, v54 5, v55 4, v56 6, v57 10, v58 6, v59 7, v60 2/
PO(V)    processing time of vessel v             /v1 2, v2 4, v3 4, v4 7, v5 4, v6 2, v7 8, v8 6, v9 7, v10 10, v11 10, v12 2, v13 3, v14 7, v15 10, v16 2, v17 3, v18 10, v19 4, v20 8, v21 4, v22 8, v23 10, v24 7, v25 2, v26 10, v27 6, v28 2, v29 5, v30 9, v31 9, v32 4, v33 6, v34 3, v35 9, v36 8, v37 3, v38 7, v39 3, v40 9, v41 6, v42 9, v43 7, v44 5, v45 2, v46 6, v47 3, v48 3, v49 3, v50 9, v51 10, v52 4, v53 8, v54 2, v55 7, v56 6, v57 8, v58 9, v59 4, v60 8/
LEN(V)   length of vessel v                      /v1 1, v2 1, v3 2, v4 2, v5 3, v6 3, v7 2, v8 1, v9 2, v10 1, v11 2, v12 1, v13 2, v14 2, v15 2, v16 2, v17 2, v18 1, v19 2, v20 2, v21 1, v22 2, v23 1, v24 2, v25 2, v26 2, v27 1, v28 1, v29 1, v30 2, v31 2, v32 2, v33 1, v34 1, v35 1, v36 2, v37 2, v38 1, v39 1, v40 1, v41 1, v42 3, v43 2, v44 3, v45 1, v46 3, v47 1, v48 2, v49 1, v50 3, v51 1, v52 1, v53 1, v54 3, v55 3, v56 2, v57 3, v58 3, v59 3, v60 3/
T1(V)    expected time to arrival of vessel v    /v1 10, v2 13, v3 3, v4 20, v5 4, v6 11, v7 13, v8 20, v9 19, v10 21, v11 5, v12 13, v13 27, v14 2, v15 14, v16 22, v17 19, v18 21, v19 14, v20 5, v21 23, v22 13, v23 17, v24 25, v25 22, v26 9, v27 3, v28 22, v29 21, v30 22, v31 21, v32 24, v33 29, v34 25, v35 4, v36 22, v37 5, v38 16, v39 23, v40 2, v41 5, v42 27, v43 12, v44 20, v45 26, v46 26, v47 20, v48 24, v49 13, v50 28, v51 28, v52 18, v53 28, v54 30, v55 19, v56 9, v57 11, v58 26, v59 15, v60 29/
T2(V)    expected time to departure of vessel v  /v1 14, v2 21, v3 11, v4 34, v5 12, v6 15, v7 29, v8 32, v9 33, v10 41, v11 25, v12 17, v13 33, v14 16, v15 34, v16 26, v17 25, v18 41, v19 22, v20 21, v21 31, v22 29, v23 37, v24 39, v25 26, v26 29, v27 15, v28 26, v29 31, v30 40, v31 39, v32 32, v33 41, v34 31, v35 22, v36 38, v37 11, v38 30, v39 29, v40 20, v41 17, v42 45, v43 26, v44 30, v45 30, v46 38, v47 26, v48 30, v49 19, v50 46, v51 48, v52 26, v53 44, v54 34, v55 33, v56 21, v57 27, v58 44, v59 23, v60 45/
S(B)     available start time of berth b         /b1 1, b2 6, b3 5, b4 7, b5 5, b6 2, b7 7, b8 9, b9 2, b10 9, b11 4, b12 5, b13 9, b14 3, b15 10, b16 2, b17 2, b18 3, b19 4, b20 5, b21 1, b22 10, b23 6, b24 10, b25 5, b26 8, b27 4, b28 7, b29 8, b30 9/
E(B)     available end time of berth b           /b1 42, b2 44, b3 40, b4 47, b5 45, b6 42, b7 44, b8 48, b9 41, b10 40, b11 45, b12 40, b13 41, b14 42, b15 45, b16 40, b17 41, b18 46, b19 41, b20 43, b21 42, b22 42, b23 45, b24 45, b25 47, b26 45, b27 45, b28 50, b29 42, b30 44/;

TABLE
U(V,B)   latest time the vessel v can be assigned to berth b
           b1        b2        b3        b4        b5        b6        b7        b8        b9        b10       b11       b12       b13       b14       b15       b16       b17       b18       b19       b20       b21       b22       b23       b24       b25       b26       b27       b28       b29       b30
v1         14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14
v2         21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v3         11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11
v4         34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34
v5         12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12
v6         15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15
v7         29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29
v8         32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32
v9         33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33
v10        41        41        40        41        41        41        41        41        41        40        41        40        41        41        41        40        41        41        41        41        41        41        41        41        41        41        41        41        41        41
v11        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25
v12        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17
v13        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33
v14        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16
v15        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34
v16        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v17        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25
v18        41        41        40        41        41        41        41        41        41        40        41        40        41        41        41        40        41        41        41        41        41        41        41        41        41        41        41        41        41        41
v19        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v20        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v21        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31
v22        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29
v23        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37        37
v24        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39
v25        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v26        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29
v27        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15
v28        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v29        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31
v30        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40        40
v31        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39        39
v32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32        32
v33        41        41        40        41        41        41        41        41        41        40        41        40        41        41        41        40        41        41        41        41        41        41        41        41        41        41        41        41        41        41
v34        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31        31
v35        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v36        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38
v37        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11
v38        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30
v39        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29
v40        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20
v41        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17
v42        42        44        40        45        45        42        44        45        41        40        45        40        41        42        45        40        41        45        41        43        42        42        45        45        45        45        45        45        42        44
v43        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v44        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30
v45        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30
v46        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38        38
v47        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v48        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30
v49        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19
v50        42        44        40        46        45        42        44        46        41        40        45        40        41        42        45        40        41        46        41        43        42        42        45        45        46        45        45        46        42        44
v51        42        44        40        47        45        42        44        48        41        40        45        40        41        42        45        40        41        46        41        43        42        42        45        45        47        45        45        48        42        44
v52        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v53        42        44        40        44        44        42        44        44        41        40        44        40        41        42        44        40        41        44        41        43        42        42        44        44        44        44        44        44        42        44
v54        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34        34
v55        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33        33
v56        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v57        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27
v58        42        44        40        44        44        42        44        44        41        40        44        40        41        42        44        40        41        44        41        43        42        42        44        44        44        44        44        44        42        44
v59        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23
v60        42        44        40        45        45        42        44        45        41        40        45        40        41        42        45        40        41        45        41        43        42        42        45        45        45        45        45        45        42        44;

TABLE
L(V,B)   earliest time the vessel v can be assigned to berth b
           b1        b2        b3        b4        b5        b6        b7        b8        b9        b10       b11       b12       b13       b14       b15       b16       b17       b18       b19       b20       b21       b22       b23       b24       b25       b26       b27       b28       b29       b30
v1         10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10        10
v2         13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13
v3         3         6         5         7         5         3         7         9         3         9         4         5         9         3         10        3         3         3         4         5         3         10        6         10        5         8         4         7         8         9
v4         20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20
v5         4         6         5         7         5         4         7         9         4         9         4         5         9         4         10        4         4         4         4         5         4         10        6         10        5         8         4         7         8         9
v6         11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11
v7         13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13
v8         20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20
v9         19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19
v10        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v11        5         6         5         7         5         5         7         9         5         9         5         5         9         5         10        5         5         5         5         5         5         10        6         10        5         8         5         7         8         9
v12        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13
v13        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27
v14        2         6         5         7         5         2         7         9         2         9         4         5         9         3         10        2         2         3         4         5         2         10        6         10        5         8         4         7         8         9
v15        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14
v16        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v17        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19
v18        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v19        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14        14
v20        5         6         5         7         5         5         7         9         5         9         5         5         9         5         10        5         5         5         5         5         5         10        6         10        5         8         5         7         8         9
v21        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23
v22        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13
v23        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17        17
v24        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25
v25        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v26        9         9         9         9         9         9         9         9         9         9         9         9         9         9         10        9         9         9         9         9         9         10        9         10        9         9         9         9         9         9
v27        3         6         5         7         5         3         7         9         3         9         4         5         9         3         10        3         3         3         4         5         3         10        6         10        5         8         4         7         8         9
v28        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v29        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v30        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v31        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21        21
v32        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24
v33        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29
v34        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25        25
v35        4         6         5         7         5         4         7         9         4         9         4         5         9         4         10        4         4         4         4         5         4         10        6         10        5         8         4         7         8         9
v36        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22        22
v37        5         6         5         7         5         5         7         9         5         9         5         5         9         5         10        5         5         5         5         5         5         10        6         10        5         8         5         7         8         9
v38        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16        16
v39        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23        23
v40        2         6         5         7         5         2         7         9         2         9         4         5         9         3         10        2         2         3         4         5         2         10        6         10        5         8         4         7         8         9
v41        5         6         5         7         5         5         7         9         5         9         5         5         9         5         10        5         5         5         5         5         5         10        6         10        5         8         5         7         8         9
v42        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27        27
v43        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12        12
v44        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20
v45        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v46        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v47        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20        20
v48        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24        24
v49        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13        13
v50        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28
v51        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28
v52        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18        18
v53        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28        28
v54        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30        30
v55        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19        19
v56        9         9         9         9         9         9         9         9         9         9         9         9         9         9         10        9         9         9         9         9         9         10        9         10        9         9         9         9         9         9
v57        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11        11
v58        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26        26
v59        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15        15
v60        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29        29;

BINARY VARIABLES
X(V,B,T);
VARIABLES
Z        objective function value;
EQUATIONS
CONST1
CONST2
CONST3
CONST4
OBJECTIVE;

CONST1(V)..                                                                                                                                      SUM( B, SUM( T $ (ORD(T)>=L(V,B) AND ORD(T)<=(U(V,B)-PO(V))), X(V,B,T))) =e= LEN(V);
CONST2(B,T) $ (ORD(T)>=S(B) AND ORD(T)<=(E(B)-1))..                                                                                              SUM( V, SUM( TO $ (ORD(TO)>=T1(V) AND ORD(TO)>=S(B) AND ORD(TO)>=(ORD(T)+1-PO(V)) AND ORD(TO)<=ORD(T) AND ORD(TO)<=(T2(V)-PO(V)) AND ORD(TO)<=(E(B)-PO(V))), X(V,B,TO))) =l= 1;
CONST3(V,T,B1,B2) $ (LEN(V)>=2 AND ORD(T)>=L(V,B1) AND ORD(T)<=(U(V,B1)-PO(V)) AND ORD(T)>=L(V,B2) AND ORD(T)<=(U(V,B2)-PO(V)))..                (X(V,B1,T) + X(V,B2,T) - 2)*999 + (ORD(B1) - ORD(B2)) =l= LEN(V) - 1;
CONST4(V,B1,B2,TT1,TT2) $ (LEN(V)>=2 AND ORD(TT1)>=L(V,B1) AND ORD(TT1)<=(U(V,B1)-PO(V)) AND ORD(TT2)>=L(V,B2) AND ORD(TT2)<=(U(V,B2)-PO(V)))..  (X(V,B1,TT1) + X(V,B2,TT2) - 2)*999 + (ORD(TT1) - ORD(TT2)) =l= 0;
OBJECTIVE..                                                                                                                                      SUM( V, SUM( B, SUM( T $ (ORD(T)>=L(V,B) AND ORD(T)<=(U(V,B)-PO(V))), P(V)*(X(V,B,T)/LEN(V))*(ORD(T) + PO(V) - T1(V))))) =e= Z;

option optCR = 0;
MODEL                    case1  /all/;
SOLVE                    case1 using MIP minimizing Z;
DISPLAY                  X.l;

